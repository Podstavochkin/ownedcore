# –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±–∞–≥–∞: –º–∞—Ä–∫–µ—Ä—ã –ø—Ä–æ–ø–∞–¥–∞—é—Ç –ø—Ä–∏ –ø—Ä–æ–∫—Ä—É—Ç–∫–µ –≥—Ä–∞—Ñ–∏–∫–∞

**–î–∞—Ç–∞:** 31.12.2024

---

## üêõ –ü—Ä–æ–±–ª–µ–º–∞

–ü—Ä–∏ –ø—Ä–æ–∫—Ä—É—Ç–∫–µ –≥—Ä–∞—Ñ–∏–∫–∞ –≤–ø—Ä–∞–≤–æ (–±–ª–∏–∂–µ –∫ —Ç–µ–∫—É—â–µ–π —Å–≤–µ—á–µ) –≤—Å–µ –º–∞—Ä–∫–µ—Ä—ã (—Å–∏–≥–Ω–∞–ª—ã –≤—Ö–æ–¥–∞/–≤—ã—Ö–æ–¥–∞, –ø–∞—Ç—Ç–µ—Ä–Ω—ã) –ø—Ä–æ–ø–∞–¥–∞–ª–∏ —Å –≥—Ä–∞—Ñ–∏–∫–∞.

---

## üîç –ü—Ä–∏—á–∏–Ω–∞

1. **–ú–∞—Ä–∫–µ—Ä—ã —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–ª–∏—Å—å –æ–¥–∏–Ω —Ä–∞–∑** –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –¥–∞–Ω–Ω—ã—Ö –∏ –Ω–µ –æ–±–Ω–æ–≤–ª—è–ª–∏—Å—å –ø—Ä–∏ –ø—Ä–æ–∫—Ä—É—Ç–∫–µ
2. **`fitContent()` —Å–±—Ä–∞—Å—ã–≤–∞–ª –º–∞—Ä–∫–µ—Ä—ã** - –º–∞—Ä–∫–µ—Ä—ã —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–ª–∏—Å—å –¥–æ –≤—ã–∑–æ–≤–∞ `fitContent()`, –∫–æ—Ç–æ—Ä—ã–π –º–æ–≥ –∏—Ö –æ—á–∏—Å—Ç–∏—Ç—å
3. **–û—Ç—Å—É—Ç—Å—Ç–≤–æ–≤–∞–ª–∞ –ø–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤–∏–¥–∏–º–æ–≥–æ –¥–∏–∞–ø–∞–∑–æ–Ω–∞** - –ø—Ä–∏ –ø—Ä–æ–∫—Ä—É—Ç–∫–µ –≥—Ä–∞—Ñ–∏–∫–∞ –º–∞—Ä–∫–µ—Ä—ã –Ω–µ –ø–µ—Ä–µ—É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–ª–∏—Å—å

---

## ‚úÖ –†–µ—à–µ–Ω–∏–µ

### 1. –ü–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤–∏–¥–∏–º–æ–≥–æ –¥–∏–∞–ø–∞–∑–æ–Ω–∞

–î–æ–±–∞–≤–ª–µ–Ω–∞ –ø–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ —Å–æ–±—ã—Ç–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤–∏–¥–∏–º–æ–≥–æ –¥–∏–∞–ø–∞–∑–æ–Ω–∞ –≥—Ä–∞—Ñ–∏–∫–∞:

```javascript
chart.timeScale().subscribeVisibleTimeRangeChange(() => {
    // –ü–µ—Ä–µ—É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –≤—Å–µ –º–∞—Ä–∫–µ—Ä—ã –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –≤–∏–¥–∏–º–æ–≥–æ –¥–∏–∞–ø–∞–∑–æ–Ω–∞
    if (candlestickSeries && window.allChartMarkers && window.allChartMarkers.length > 0) {
        try {
            candlestickSeries.setMarkers(window.allChartMarkers);
        } catch (e) {
            console.warn('–û—à–∏–±–∫–∞ –ø–µ—Ä–µ—É—Å—Ç–∞–Ω–æ–≤–∫–∏ –º–∞—Ä–∫–µ—Ä–æ–≤ –ø—Ä–∏ –ø—Ä–æ–∫—Ä—É—Ç–∫–µ:', e);
        }
    }
});
```

### 2. –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤—Å–µ—Ö –º–∞—Ä–∫–µ—Ä–æ–≤ –≤ –≥–ª–æ–±–∞–ª—å–Ω–æ–π –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π

–í—Å–µ –º–∞—Ä–∫–µ—Ä—ã (—Å–∏–≥–Ω–∞–ª—ã + –ø–∞—Ç—Ç–µ—Ä–Ω—ã) —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ `window.allChartMarkers` –¥–ª—è –ø–æ—Å–ª–µ–¥—É—é—â–µ–π –ø–µ—Ä–µ—É—Å—Ç–∞–Ω–æ–≤–∫–∏:

```javascript
// –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤—Å–µ –º–∞—Ä–∫–µ—Ä—ã –≤ –≥–ª–æ–±–∞–ª—å–Ω–æ–π –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –¥–ª—è –ø–µ—Ä–µ—É—Å—Ç–∞–Ω–æ–≤–∫–∏ –ø—Ä–∏ –ø—Ä–æ–∫—Ä—É—Ç–∫–µ
window.allChartMarkers = allMarkers;
```

### 3. –ü–µ—Ä–µ—É—Å—Ç–∞–Ω–æ–≤–∫–∞ –º–∞—Ä–∫–µ—Ä–æ–≤ –ø–æ—Å–ª–µ `fitContent()`

–ú–∞—Ä–∫–µ—Ä—ã –ø–µ—Ä–µ—É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—é—Ç—Å—è –ø–æ—Å–ª–µ –≤—ã–∑–æ–≤–∞ `fitContent()` —Å –Ω–µ–±–æ–ª—å—à–æ–π –∑–∞–¥–µ—Ä–∂–∫–æ–π:

```javascript
chart.timeScale().fitContent();

// –ü–µ—Ä–µ—É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –º–∞—Ä–∫–µ—Ä—ã –ø–æ—Å–ª–µ fitContent, —Ç–∞–∫ –∫–∞–∫ –æ–Ω –º–æ–∂–µ—Ç —Å–±—Ä–æ—Å–∏—Ç—å –∏—Ö
setTimeout(() => {
    if (candlestickSeries && window.allChartMarkers && window.allChartMarkers.length > 0) {
        try {
            candlestickSeries.setMarkers(window.allChartMarkers);
            console.log(`üîÑ –ü–µ—Ä–µ—É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ ${window.allChartMarkers.length} –º–∞—Ä–∫–µ—Ä–æ–≤ –ø–æ—Å–ª–µ fitContent`);
        } catch (e) {
            console.warn('–û—à–∏–±–∫–∞ –ø–µ—Ä–µ—É—Å—Ç–∞–Ω–æ–≤–∫–∏ –º–∞—Ä–∫–µ—Ä–æ–≤ –ø–æ—Å–ª–µ fitContent:', e);
        }
    }
}, 100);
```

### 4. –û—á–∏—Å—Ç–∫–∞ –≥–ª–æ–±–∞–ª—å–Ω—ã—Ö –º–∞—Ä–∫–µ—Ä–æ–≤ –ø—Ä–∏ –æ—á–∏—Å—Ç–∫–µ –≥—Ä–∞—Ñ–∏–∫–∞

–ü—Ä–∏ –æ—á–∏—Å—Ç–∫–µ –≥—Ä–∞—Ñ–∏–∫–∞ (–ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –ø–∞—Ä—ã/—Ç–∞–π–º—Ñ—Ä–µ–π–º–∞) –æ—á–∏—â–∞—é—Ç—Å—è –∏ –≥–ª–æ–±–∞–ª—å–Ω—ã–µ –º–∞—Ä–∫–µ—Ä—ã:

```javascript
// –û—á–∏—â–∞–µ–º –≥–ª–æ–±–∞–ª—å–Ω—ã–µ –º–∞—Ä–∫–µ—Ä—ã
window.signalMarkers = [];
window.allChartMarkers = [];
```

---

## üìä –†–µ–∑—É–ª—å—Ç–∞—Ç

–¢–µ–ø–µ—Ä—å –º–∞—Ä–∫–µ—Ä—ã:
- ‚úÖ **–û—Å—Ç–∞—é—Ç—Å—è –≤–∏–¥–∏–º—ã–º–∏** –ø—Ä–∏ –ø—Ä–æ–∫—Ä—É—Ç–∫–µ –≥—Ä–∞—Ñ–∏–∫–∞ –≤ –ª—é–±—É—é —Å—Ç–æ—Ä–æ–Ω—É
- ‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ—É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—é—Ç—Å—è** –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –≤–∏–¥–∏–º–æ–≥–æ –¥–∏–∞–ø–∞–∑–æ–Ω–∞
- ‚úÖ **–ù–µ –ø—Ä–æ–ø–∞–¥–∞—é—Ç** –ø–æ—Å–ª–µ –≤—ã–∑–æ–≤–∞ `fitContent()`
- ‚úÖ **–ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ—á–∏—â–∞—é—Ç—Å—è** –ø—Ä–∏ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–∏ –ø–∞—Ä—ã/—Ç–∞–π–º—Ñ—Ä–µ–π–º–∞

---

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –ò–∑–º–µ–Ω–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã:
- `web/charts.html`

### –î–æ–±–∞–≤–ª–µ–Ω–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ:
- `window.allChartMarkers` - –≥–ª–æ–±–∞–ª—å–Ω–∞—è –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –≤—Å–µ—Ö –º–∞—Ä–∫–µ—Ä–æ–≤ –≥—Ä–∞—Ñ–∏–∫–∞

### –î–æ–±–∞–≤–ª–µ–Ω–Ω—ã–µ –ø–æ–¥–ø–∏—Å–∫–∏:
- `chart.timeScale().subscribeVisibleTimeRangeChange()` - –ø–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤–∏–¥–∏–º–æ–≥–æ –¥–∏–∞–ø–∞–∑–æ–Ω–∞

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–î–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:
1. –û—Ç–∫—Ä–æ–π—Ç–µ –≥—Ä–∞—Ñ–∏–∫ –ª—é–±–æ–π –ø–∞—Ä—ã
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –º–∞—Ä–∫–µ—Ä—ã –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è
3. –ü—Ä–æ–∫—Ä—É—Ç–∏—Ç–µ –≥—Ä–∞—Ñ–∏–∫ –≤–ø—Ä–∞–≤–æ (–∫ —Ç–µ–∫—É—â–µ–π —Å–≤–µ—á–µ)
4. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –º–∞—Ä–∫–µ—Ä—ã –æ—Å—Ç–∞—é—Ç—Å—è –≤–∏–¥–∏–º—ã–º–∏
5. –ü—Ä–æ–∫—Ä—É—Ç–∏—Ç–µ –≥—Ä–∞—Ñ–∏–∫ –≤–ª–µ–≤–æ (–∫ —Å—Ç–∞—Ä—ã–º —Å–≤–µ—á–∞–º)
6. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –º–∞—Ä–∫–µ—Ä—ã –æ—Å—Ç–∞—é—Ç—Å—è –≤–∏–¥–∏–º—ã–º–∏

---

## üìù –ü—Ä–∏–º–µ—á–∞–Ω–∏—è

- –ü–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤–∏–¥–∏–º–æ–≥–æ –¥–∏–∞–ø–∞–∑–æ–Ω–∞ —Å–æ–∑–¥–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω —Ä–∞–∑ –ø—Ä–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –≥—Ä–∞—Ñ–∏–∫–∞
- –ü–µ—Ä–µ—É—Å—Ç–∞–Ω–æ–≤–∫–∞ –º–∞—Ä–∫–µ—Ä–æ–≤ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —Å –Ω–µ–±–æ–ª—å—à–æ–π –∑–∞–¥–µ—Ä–∂–∫–æ–π (100ms) –ø–æ—Å–ª–µ `fitContent()` –¥–ª—è –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç–∏
- –í—Å–µ –º–∞—Ä–∫–µ—Ä—ã –ø–µ—Ä–µ—É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—é—Ç—Å—è —Ü–µ–ª–∏–∫–æ–º, –±–µ–∑ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –ø–æ –≤–∏–¥–∏–º–æ–º—É –¥–∏–∞–ø–∞–∑–æ–Ω—É (Lightweight Charts —Å–∞–º —É–ø—Ä–∞–≤–ª—è–µ—Ç –≤–∏–¥–∏–º–æ—Å—Ç—å—é)

