# –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–∏–≥–Ω–∞–ª–æ–≤ –∏–∑ —Å—Ç–∞—Ç—É—Å–∞ "—Ü–µ–Ω–∞ —É—à–ª–∞"

**–î–∞—Ç–∞:** 31.12.2024

---

## ‚úÖ –î–∞, —Å–∏—Å—Ç–µ–º–∞ –º–æ–∂–µ—Ç –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—Ç—å —Å–∏–≥–Ω–∞–ª—ã!

–°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–ø—Ä–æ–≤–µ—Ä—è–µ—Ç —Å–∏–≥–Ω–∞–ª—ã —Å–æ —Å—Ç–∞—Ç—É—Å–æ–º `PRICE_DEVIATION_TOO_LARGE` –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∏—Ö –≤ —Å—Ç–∞—Ç—É—Å `WAITING_FOR_PRICE`, –µ—Å–ª–∏ —Ü–µ–Ω–∞ –≤–µ—Ä–Ω—É–ª–∞—Å—å –≤ –¥–æ–ø—É—Å—Ç–∏–º—ã–π –¥–∏–∞–ø–∞–∑–æ–Ω.

---

## üîÑ –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

### 1. Watcher –ø–µ—Ä–µ–ø—Ä–æ–≤–µ—Ä—è–µ—Ç —Å–∏–≥–Ω–∞–ª—ã

**–ó–∞–¥–∞—á–∞:** `tasks.demo_trading_tasks.watch_waiting_signals`  
**–ü–µ—Ä–∏–æ–¥–∏—á–Ω–æ—Å—Ç—å:** –ö–∞–∂–¥—ã–µ –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å–µ–∫—É–Ω–¥ (–Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è –≤ Celery Beat)

**–õ–æ–≥–∏–∫–∞:**
1. –ù–∞—Ö–æ–¥–∏—Ç –≤—Å–µ —Å–∏–≥–Ω–∞–ª—ã —Å–æ —Å—Ç–∞—Ç—É—Å–æ–º `PRICE_DEVIATION_TOO_LARGE`
2. –ü—Ä–æ–≤–µ—Ä—è–µ—Ç, —á—Ç–æ —Å–∏–≥–Ω–∞–ª –µ—â–µ —Å–≤–µ–∂–∏–π (–Ω–µ —Å—Ç–∞—Ä—à–µ 30 –º–∏–Ω—É—Ç)
3. –ü–æ–ª—É—á–∞–µ—Ç —Ç–µ–∫—É—â—É—é —Ü–µ–Ω—É
4. –ü—Ä–æ–≤–µ—Ä—è–µ—Ç —á–µ—Ä–µ–∑ `check_signal_invalidated()`, –≤–µ—Ä–Ω—É–ª–∞—Å—å –ª–∏ —Ü–µ–Ω–∞ –≤ –¥–æ–ø—É—Å—Ç–∏–º—ã–π –¥–∏–∞–ø–∞–∑–æ–Ω
5. –ï—Å–ª–∏ —Ü–µ–Ω–∞ –≤–µ—Ä–Ω—É–ª–∞—Å—å ‚Üí –ø–µ—Ä–µ–≤–æ–¥–∏—Ç —Å–∏–≥–Ω–∞–ª –≤ `WAITING_FOR_PRICE`

### 2. –£—Å–ª–æ–≤–∏—è –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è

**–°–∏–≥–Ω–∞–ª –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è, –µ—Å–ª–∏:**
- ‚úÖ –°—Ç–∞—Ç—É—Å —Å–∏–≥–Ω–∞–ª–∞ = `ACTIVE`
- ‚úÖ `demo_status` = `PRICE_DEVIATION_TOO_LARGE`
- ‚úÖ –í–æ–∑—Ä–∞—Å—Ç —Å–∏–≥–Ω–∞–ª–∞ < 30 –º–∏–Ω—É—Ç (`MAX_SIGNAL_AGE_SECONDS`)
- ‚úÖ –¶–µ–Ω–∞ –≤–µ—Ä–Ω—É–ª–∞—Å—å –≤ –¥–æ–ø—É—Å—Ç–∏–º—ã–π –¥–∏–∞–ø–∞–∑–æ–Ω (–ø—Ä–æ–≤–µ—Ä–∫–∞ —á–µ—Ä–µ–∑ `check_signal_invalidated()`)

**–ü—Ä–æ–≤–µ—Ä–∫–∞ `check_signal_invalidated()` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `False` (—Å–∏–≥–Ω–∞–ª –≤–∞–ª–∏–¥–µ–Ω), –µ—Å–ª–∏:**
- ‚úÖ –†–∞—Å—Å—Ç–æ—è–Ω–∏–µ –æ—Ç —É—Ä–æ–≤–Ω—è ‚â§ 2.0% (`MAX_DEVIATION_PCT`)
- ‚úÖ –£—Ä–æ–≤–µ–Ω—å –Ω–µ –ø—Ä–æ–±–∏—Ç –ø—Ä–æ—Ç–∏–≤ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è (‚â§ 0.2% –ø—Ä–æ–±–∏—Ç–∏–µ)

### 3. –ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø—Ä–∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–∏

```python
# –°—Ç–∞—Ä—ã–π —Å—Ç–∞—Ç—É—Å
demo_status = "PRICE_DEVIATION_TOO_LARGE"

# –ù–æ–≤—ã–π —Å—Ç–∞—Ç—É—Å
demo_status = "WAITING_FOR_PRICE"
demo_error = None  # –û—á–∏—â–∞–µ—Ç—Å—è –æ—à–∏–±–∫–∞
demo_updated_at = now  # –û–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –≤—Ä–µ–º—è

# –õ–æ–≥–∏—Ä—É–µ—Ç—Å—è —Å–æ–±—ã—Ç–∏–µ
event_type = "PRICE_RESTORED"
status = "WAITING_FOR_PRICE"
```

–ü–æ—Å–ª–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è —Å–∏–≥–Ω–∞–ª —Å–Ω–æ–≤–∞ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è watcher'–æ–º –∏ –º–æ–∂–µ—Ç –ø–æ–ª—É—á–∏—Ç—å –æ—Ä–¥–µ—Ä, –µ—Å–ª–∏ —Ü–µ–Ω–∞ –ø–æ–¥–æ–π–¥–µ—Ç –∫ —É—Ä–æ–≤–Ω—é.

---

## ‚è∞ –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

### 1. –í–æ–∑—Ä–∞—Å—Ç —Å–∏–≥–Ω–∞–ª–∞

**–ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π –≤–æ–∑—Ä–∞—Å—Ç:** 30 –º–∏–Ω—É—Ç (`MAX_SIGNAL_AGE_SECONDS = 30 * 60 = 1800 —Å–µ–∫—É–Ω–¥`)

**–ü–æ—á–µ–º—É:**
- –°—Ç–∞—Ä—ã–µ —Å–∏–≥–Ω–∞–ª—ã –º–æ–≥—É—Ç –±—ã—Ç—å –Ω–µ–∞–∫—Ç—É–∞–ª—å–Ω—ã–º–∏
- –†—ã–Ω–æ–∫ –º–µ–Ω—è–µ—Ç—Å—è, —É—Ä–æ–≤–Ω–∏ –º–æ–≥—É—Ç —É—Å—Ç–∞—Ä–µ—Ç—å
- –û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ—Ç –Ω–∞–≥—Ä—É–∑–∫—É –Ω–∞ —Å–∏—Å—Ç–µ–º—É

**–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —Å–æ —Å—Ç–∞—Ä—ã–º–∏ —Å–∏–≥–Ω–∞–ª–∞–º–∏:**
- –°–∏–≥–Ω–∞–ª—ã —Å—Ç–∞—Ä—à–µ 30 –º–∏–Ω—É—Ç **–Ω–µ –ø–µ—Ä–µ–ø—Ä–æ–≤–µ—Ä—è—é—Ç—Å—è**
- –û–Ω–∏ –æ—Å—Ç–∞—é—Ç—Å—è –≤ —Å—Ç–∞—Ç—É—Å–µ `PRICE_DEVIATION_TOO_LARGE`
- –ù–µ –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

### 2. –ü–æ—Ä–æ–≥–∏ –ø—Ä–æ–≤–µ—Ä–∫–∏

**–ü–æ—Ä–æ–≥ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è:** –†–∞—Å—Å—Ç–æ—è–Ω–∏–µ –æ—Ç —É—Ä–æ–≤–Ω—è ‚â§ 2.0%

–≠—Ç–æ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è —á–µ—Ä–µ–∑ `check_signal_invalidated()`:
- –ï—Å–ª–∏ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ > 2.0% ‚Üí —Å–∏–≥–Ω–∞–ª –æ—Å—Ç–∞–µ—Ç—Å—è `PRICE_DEVIATION_TOO_LARGE`
- –ï—Å–ª–∏ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ ‚â§ 2.0% ‚Üí —Å–∏–≥–Ω–∞–ª –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –≤ `WAITING_FOR_PRICE`

**–í–∞–∂–Ω–æ:** –ü–æ—Ä–æ–≥ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è (2.0%) –±–æ–ª—å—à–µ –ø–æ—Ä–æ–≥–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ (0.7%), –ø–æ—ç—Ç–æ–º—É –µ—Å—Ç—å –∑–∞–ø–∞—Å –¥–ª—è –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è.

---

## üìä –ü—Ä–∏–º–µ—Ä —Ä–∞–±–æ—Ç—ã

### –°—Ü–µ–Ω–∞—Ä–∏–π 1: –£—Å–ø–µ—à–Ω–æ–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ

```
1. –°–∏–≥–Ω–∞–ª –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è –ø—Ä–∏ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–∏ 0.6% –æ—Ç —É—Ä–æ–≤–Ω—è
   ‚Üí demo_status = "WAITING_FOR_PRICE"

2. –¶–µ–Ω–∞ —É—Ö–æ–¥–∏—Ç –æ—Ç —É—Ä–æ–≤–Ω—è –Ω–∞ 1.5%
   ‚Üí demo_status = "PRICE_DEVIATION_TOO_LARGE"

3. –ß–µ—Ä–µ–∑ 5 –º–∏–Ω—É—Ç —Ü–µ–Ω–∞ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –Ω–∞ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ 1.0% –æ—Ç —É—Ä–æ–≤–Ω—è
   ‚Üí Watcher –ø–µ—Ä–µ–ø—Ä–æ–≤–µ—Ä—è–µ—Ç —Å–∏–≥–Ω–∞–ª
   ‚Üí check_signal_invalidated() –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç False (—Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ 1.0% < 2.0%)
   ‚Üí demo_status = "WAITING_FOR_PRICE" ‚úÖ

4. –¶–µ–Ω–∞ –ø–æ–¥—Ö–æ–¥–∏—Ç –∫ —É—Ä–æ–≤–Ω—é –Ω–∞ 0.5%
   ‚Üí –°–∏–≥–Ω–∞–ª —Å–Ω–æ–≤–∞ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è
   ‚Üí –ú–æ–∂–µ—Ç –±—ã—Ç—å —Ä–∞–∑–º–µ—â–µ–Ω –æ—Ä–¥–µ—Ä
```

### –°—Ü–µ–Ω–∞—Ä–∏–π 2: –°–∏–≥–Ω–∞–ª –Ω–µ –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è (—Å–ª–∏—à–∫–æ–º —Å—Ç–∞—Ä—ã–π)

```
1. –°–∏–≥–Ω–∞–ª –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è –ø—Ä–∏ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–∏ 0.6% –æ—Ç —É—Ä–æ–≤–Ω—è
   ‚Üí demo_status = "WAITING_FOR_PRICE"

2. –¶–µ–Ω–∞ —É—Ö–æ–¥–∏—Ç –æ—Ç —É—Ä–æ–≤–Ω—è –Ω–∞ 1.5%
   ‚Üí demo_status = "PRICE_DEVIATION_TOO_LARGE"

3. –ü—Ä–æ—Ö–æ–¥–∏—Ç 35 –º–∏–Ω—É—Ç (–±–æ–ª—å—à–µ 30 –º–∏–Ω—É—Ç)
   ‚Üí Watcher –ø—Ä–æ–ø—É—Å–∫–∞–µ—Ç —Å–∏–≥–Ω–∞–ª (—Å–ª–∏—à–∫–æ–º —Å—Ç–∞—Ä—ã–π)
   ‚Üí –°–∏–≥–Ω–∞–ª –æ—Å—Ç–∞–µ—Ç—Å—è –≤ —Å—Ç–∞—Ç—É—Å–µ "PRICE_DEVIATION_TOO_LARGE" ‚ùå
```

### –°—Ü–µ–Ω–∞—Ä–∏–π 3: –°–∏–≥–Ω–∞–ª –Ω–µ –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è (—Ü–µ–Ω–∞ —Å–ª–∏—à–∫–æ–º –¥–∞–ª–µ–∫–æ)

```
1. –°–∏–≥–Ω–∞–ª –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è –ø—Ä–∏ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–∏ 0.6% –æ—Ç —É—Ä–æ–≤–Ω—è
   ‚Üí demo_status = "WAITING_FOR_PRICE"

2. –¶–µ–Ω–∞ —É—Ö–æ–¥–∏—Ç –æ—Ç —É—Ä–æ–≤–Ω—è –Ω–∞ 2.5%
   ‚Üí demo_status = "PRICE_DEVIATION_TOO_LARGE"

3. –ß–µ—Ä–µ–∑ 5 –º–∏–Ω—É—Ç —Ü–µ–Ω–∞ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –Ω–∞ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ 2.1% –æ—Ç —É—Ä–æ–≤–Ω—è
   ‚Üí Watcher –ø–µ—Ä–µ–ø—Ä–æ–≤–µ—Ä—è–µ—Ç —Å–∏–≥–Ω–∞–ª
   ‚Üí check_signal_invalidated() –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç True (—Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ 2.1% > 2.0%)
   ‚Üí –°–∏–≥–Ω–∞–ª –æ—Å—Ç–∞–µ—Ç—Å—è –≤ —Å—Ç–∞—Ç—É—Å–µ "PRICE_DEVIATION_TOO_LARGE" ‚ùå
```

---

## üîç –ì–¥–µ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –ª–æ–≥–∏–∫–∞

### –§–∞–π–ª: `tasks/demo_trading_tasks.py`

**–§—É–Ω–∫—Ü–∏—è:** `watch_waiting_signals()`

**–°–µ–∫—Ü–∏—è:** "0.6) –ü–µ—Ä–µ–ø—Ä–æ–≤–µ—Ä—è–µ–º —Å–∏–≥–Ω–∞–ª—ã —Å–æ —Å—Ç–∞—Ç—É—Å–æ–º PRICE_DEVIATION_TOO_LARGE"

**–ö–æ–¥:**
```python
# –ü–µ—Ä–µ–ø—Ä–æ–≤–µ—Ä—è–µ–º —Å–∏–≥–Ω–∞–ª—ã —Å–æ —Å—Ç–∞—Ç—É—Å–æ–º PRICE_DEVIATION_TOO_LARGE
price_deviation_signals = (
    session.query(Signal)
    .filter(
        Signal.status == "ACTIVE",
        Signal.demo_status == "PRICE_DEVIATION_TOO_LARGE",
        Signal.timestamp >= cutoff_time,  # –¢–æ–ª—å–∫–æ —Å–≤–µ–∂–∏–µ (–Ω–µ —Å—Ç–∞—Ä—à–µ 30 –º–∏–Ω—É—Ç)
    )
    .all()
)

for sig in price_deviation_signals:
    # –ü–æ–ª—É—á–∞–µ–º —Ç–µ–∫—É—â—É—é —Ü–µ–Ω—É
    current_price = bybit_demo_client.get_current_price(mapped_symbol)
    
    # –ü—Ä–æ–≤–µ—Ä—è–µ–º, –≤–µ—Ä–Ω—É–ª–∞—Å—å –ª–∏ —Ü–µ–Ω–∞ –≤ –¥–æ–ø—É—Å—Ç–∏–º—ã–π –¥–∏–∞–ø–∞–∑–æ–Ω
    is_invalidated, invalid_status, invalid_msg = demo_trade_executor.check_signal_invalidated(sig, current_price)
    
    if not is_invalidated:
        # –¶–µ–Ω–∞ –≤–µ—Ä–Ω—É–ª–∞—Å—å - –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Å–∏–≥–Ω–∞–ª
        sig.demo_status = "WAITING_FOR_PRICE"
        sig.demo_error = None
        # ... –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –∫–æ–º–º–∏—Ç
```

### –§–∞–π–ª: `core/trading/demo_trade_executor.py`

**–§—É–Ω–∫—Ü–∏—è:** `check_signal_invalidated()`

**–ü—Ä–æ–≤–µ—Ä–∫–∏:**
1. –†–∞—Å—Å—Ç–æ—è–Ω–∏–µ –æ—Ç —É—Ä–æ–≤–Ω—è > 2.0% ‚Üí `PRICE_DEVIATION_TOO_LARGE`
2. –£—Ä–æ–≤–µ–Ω—å –ø—Ä–æ–±–∏—Ç –ø—Ä–æ—Ç–∏–≤ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è > 0.2% ‚Üí `LEVEL_BROKEN`

---

## üìà –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è

Watcher –ª–æ–≥–∏—Ä—É–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã—Ö —Å–∏–≥–Ω–∞–ª–æ–≤:

```
üîÑ Watcher: –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ N —Å–∏–≥–Ω–∞–ª–æ–≤ –∏–∑ —Å—Ç–∞—Ç—É—Å–∞ PRICE_DEVIATION_TOO_LARGE
```

–ú–æ–∂–Ω–æ –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å –≤ –ª–æ–≥–∞—Ö:
- –°–∫–æ–ª—å–∫–æ —Å–∏–≥–Ω–∞–ª–æ–≤ –±—ã–ª–æ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ
- –ö–∞–∫ —á–∞—Å—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ
- –≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –º–µ—Ö–∞–Ω–∏–∑–º–∞

---

## üí° –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

### 1. –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–π

–°–ª–µ–¥–∏—Ç–µ –∑–∞ –ª–æ–≥–∞–º–∏ watcher'–∞, —á—Ç–æ–±—ã –ø–æ–Ω—è—Ç—å:
- –°–∫–æ–ª—å–∫–æ —Å–∏–≥–Ω–∞–ª–æ–≤ –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è
- –ö–∞–∫ —á–∞—Å—Ç–æ —ç—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç
- –≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –º–µ—Ö–∞–Ω–∏–∑–º–∞

### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–æ—Ä–æ–≥–æ–≤

–ï—Å–ª–∏ —Å–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ —Å–∏–≥–Ω–∞–ª–æ–≤ –Ω–µ –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—é—Ç—Å—è:
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, –Ω–µ —Å–ª–∏—à–∫–æ–º –ª–∏ —Å—Ç—Ä–æ–≥–∏–π –ø–æ—Ä–æ–≥ 2.0%
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Å–∏–≥–Ω–∞–ª—ã –Ω–µ —Å—Ç–∞—Ä—à–µ 30 –º–∏–Ω—É—Ç

### 3. –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –≤–æ–∑—Ä–∞—Å—Ç–∞

–ï—Å–ª–∏ –Ω—É–∂–Ω–æ –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—Ç—å –±–æ–ª–µ–µ —Å—Ç–∞—Ä—ã–µ —Å–∏–≥–Ω–∞–ª—ã:
- –ú–æ–∂–Ω–æ —É–≤–µ–ª–∏—á–∏—Ç—å `MAX_SIGNAL_AGE_SECONDS`
- –ù–æ —ç—Ç–æ –º–æ–∂–µ—Ç –ø—Ä–∏–≤–µ—Å—Ç–∏ –∫ –æ–±—Ä–∞–±–æ—Ç–∫–µ –Ω–µ–∞–∫—Ç—É–∞–ª—å–Ω—ã—Ö —Å–∏–≥–Ω–∞–ª–æ–≤

---

## ‚úÖ –ò—Ç–æ–≥

**–î–∞, —Å–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç —Å–∏–≥–Ω–∞–ª—ã –∏–∑ —Å—Ç–∞—Ç—É—Å–∞ "—Ü–µ–Ω–∞ —É—à–ª–∞" –≤ "–æ–∂–∏–¥–∞–Ω–∏–µ —Ü–µ–Ω—ã", –µ—Å–ª–∏:**
- ‚úÖ –°–∏–≥–Ω–∞–ª –Ω–µ —Å—Ç–∞—Ä—à–µ 30 –º–∏–Ω—É—Ç
- ‚úÖ –¶–µ–Ω–∞ –≤–µ—Ä–Ω—É–ª–∞—Å—å –≤ –¥–æ–ø—É—Å—Ç–∏–º—ã–π –¥–∏–∞–ø–∞–∑–æ–Ω (‚â§ 2.0% –æ—Ç —É—Ä–æ–≤–Ω—è)
- ‚úÖ –£—Ä–æ–≤–µ–Ω—å –Ω–µ –ø—Ä–æ–±–∏—Ç –ø—Ä–æ—Ç–∏–≤ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è

**–ü–æ—Å–ª–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è —Å–∏–≥–Ω–∞–ª —Å–Ω–æ–≤–∞ –º–æ–Ω–∏—Ç–æ—Ä–∏—Ç—Å—è –∏ –º–æ–∂–µ—Ç –ø–æ–ª—É—á–∏—Ç—å –æ—Ä–¥–µ—Ä, –∫–æ–≥–¥–∞ —Ü–µ–Ω–∞ –ø–æ–¥–æ–π–¥–µ—Ç –∫ —É—Ä–æ–≤–Ω—é.**

